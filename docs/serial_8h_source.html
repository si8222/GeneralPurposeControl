<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>general-purpose-control: serial.h Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="icon.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">general-purpose-control
   &#160;<span id="projectnumber">1.0</span>
   </div>
   <div id="projectbrief">Control application for multiple tabletop measurement devices like the Keithley 2410 Sourcemeter</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_b2f33c71d4aa5e7af42a1ca61ff5af1b.html">source</a></li><li class="navelem"><a class="el" href="dir_8ee1a5e78eaec319fe5d64075812fc61.html">include</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">serial.h</div>  </div>
</div><!--header-->
<div class="contents">
<a href="serial_8h.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="preprocessor">#ifndef SERIAL_H</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="preprocessor">#define SERIAL_H</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160; </div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="preprocessor">#include &lt;QObject&gt;</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="preprocessor">#include &lt;QSerialPort&gt;</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="preprocessor">#include &lt;string&gt;</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="preprocessor">#include &lt;QPointer&gt;</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160; </div>
<div class="line"><a name="l00013"></a><span class="lineno"><a class="line" href="class_serial.html">   13</a></span>&#160;<span class="keyword">class </span><a class="code" href="class_serial.html">Serial</a> : <span class="keyword">public</span> <a class="code" href="class_q_object.html">QObject</a></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;{</div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;    Q_OBJECT</div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="keyword">public</span>:</div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;    <span class="keyword">explicit</span> <a class="code" href="class_serial.html#a91bfd30bbc651b1694b989a41d0f274b">Serial</a>(QString _portName, quint32 _baudRate = 9600,</div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;                   <span class="keywordtype">char</span> _terminator = 0x0a,</div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;                   QSerialPort::FlowControl _flowControl = QSerialPort::NoFlowControl,</div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;                   QSerialPort::StopBits _stopBits = QSerialPort::OneStop,</div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;                   QSerialPort::DataBits _dataBits = QSerialPort::Data8,</div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;                   QSerialPort::Parity _parity = QSerialPort::NoParity,</div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;                   <a class="code" href="class_q_object.html">QObject</a> *parent = <span class="keyword">nullptr</span>);</div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160; </div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;signals:</div>
<div class="line"><a name="l00031"></a><span class="lineno"><a class="line" href="class_serial.html#aa53c94ec8dde60228b100a58fec0e28d">   31</a></span>&#160;    <span class="keywordtype">void</span> <a class="code" href="class_serial.html#aa53c94ec8dde60228b100a58fec0e28d">receivedMessage</a>(QString message);</div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160; </div>
<div class="line"><a name="l00038"></a><span class="lineno"><a class="line" href="class_serial.html#ad6cc09355c3c789a4cd45efb1de70a6f">   38</a></span>&#160;    <span class="keywordtype">void</span> <a class="code" href="class_serial.html#ad6cc09355c3c789a4cd45efb1de70a6f">connectionStatus</a>(<span class="keywordtype">bool</span> connected);</div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160; </div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="keyword">public</span> slots:</div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="class_serial.html#aa78ab33fab40e3aad9386313fdb9291f">onReadyRead</a>();</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160; </div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="class_serial.html#a9692214d99c0da7c444774e25d193f21">makeConnection</a>();</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160; </div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="class_serial.html#a5aba620f9fe23083c857cf073f6604d9">sendScpiCommand</a>(QString command);</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160; </div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="class_serial.html#a191a3d4d755f54e438ca1a40f7ebbe0b">closeConnection</a>();</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160; </div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;<span class="keyword">private</span>:</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="class_serial.html#ade8bef9aaf7456275bb7b2be23a53fd5">scanMessage</a>(std::string&amp; <a class="code" href="class_serial.html#a2e542ba232be014746fd1aa8c452cb0b">buffer</a>);</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160; </div>
<div class="line"><a name="l00075"></a><span class="lineno"><a class="line" href="class_serial.html#a02007e17c2fca96458fabcc4803b4504">   75</a></span>&#160;    QPointer&lt;QSerialPort&gt; <a class="code" href="class_serial.html#a02007e17c2fca96458fabcc4803b4504">serialPort</a>;</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160; </div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="class_serial.html#a2a9d222cc6f3cc0f1f1c468ce11a0a3a">closeSerialPort</a>();</div>
<div class="line"><a name="l00081"></a><span class="lineno"><a class="line" href="class_serial.html#a01e0601c9a01111849d90f19c65d552b">   81</a></span>&#160;    QString <a class="code" href="class_serial.html#a01e0601c9a01111849d90f19c65d552b">portName</a>;</div>
<div class="line"><a name="l00082"></a><span class="lineno"><a class="line" href="class_serial.html#a2e542ba232be014746fd1aa8c452cb0b">   82</a></span>&#160;    std::string <a class="code" href="class_serial.html#a2e542ba232be014746fd1aa8c452cb0b">buffer</a> = <span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160; </div>
<div class="line"><a name="l00087"></a><span class="lineno"><a class="line" href="class_serial.html#a94455dd35c46ea0dbefa72fd2638705f">   87</a></span>&#160;    quint32 <a class="code" href="class_serial.html#a94455dd35c46ea0dbefa72fd2638705f">baudRate</a>; <span class="comment">// usually 9600</span></div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160; </div>
<div class="line"><a name="l00092"></a><span class="lineno"><a class="line" href="class_serial.html#a45f0d5081e650574eeb6ba89127d4ae0">   92</a></span>&#160;    <span class="keywordtype">char</span> <a class="code" href="class_serial.html#a45f0d5081e650574eeb6ba89127d4ae0">terminator</a>; <span class="comment">// usually &lt;LF&gt; &quot;linefeed&quot; in ascii</span></div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160; </div>
<div class="line"><a name="l00097"></a><span class="lineno"><a class="line" href="class_serial.html#a1612a93420585830c57b1580799dc51d">   97</a></span>&#160;    QSerialPort::FlowControl <a class="code" href="class_serial.html#a1612a93420585830c57b1580799dc51d">flowControl</a>; <span class="comment">// usually NoFlowControl</span></div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;    </div>
<div class="line"><a name="l00102"></a><span class="lineno"><a class="line" href="class_serial.html#a6297b433f84aa83cc623ee042b08f684">  102</a></span>&#160;    QSerialPort::StopBits <a class="code" href="class_serial.html#a6297b433f84aa83cc623ee042b08f684">stopBits</a>; <span class="comment">// usually OneStop</span></div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160; </div>
<div class="line"><a name="l00107"></a><span class="lineno"><a class="line" href="class_serial.html#aee15f7d9bab42cdec592960526c00b39">  107</a></span>&#160;    QSerialPort::DataBits <a class="code" href="class_serial.html#aee15f7d9bab42cdec592960526c00b39">dataBits</a>; <span class="comment">// usually Data8 (8 Bits)</span></div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160; </div>
<div class="line"><a name="l00112"></a><span class="lineno"><a class="line" href="class_serial.html#ab8d5926b58cec46bfc0a7ed295e3afd1">  112</a></span>&#160;    QSerialPort::Parity <a class="code" href="class_serial.html#ab8d5926b58cec46bfc0a7ed295e3afd1">parity</a>; <span class="comment">// usually NoParity</span></div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160; </div>
<div class="line"><a name="l00117"></a><span class="lineno"><a class="line" href="class_serial.html#ada9e5ff89fa967ecf2bbd57784228954">  117</a></span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="class_serial.html#ada9e5ff89fa967ecf2bbd57784228954">timeout</a> = 5000; <span class="comment">// s</span></div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;};</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160; </div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;<span class="preprocessor">#endif </span><span class="comment">// SERIAL_H</span></div>
<div class="ttc" id="aclass_q_object_html"><div class="ttname"><a href="class_q_object.html">QObject</a></div></div>
<div class="ttc" id="aclass_serial_html"><div class="ttname"><a href="class_serial.html">Serial</a></div><div class="ttdoc">Serial interface (UART) class that uses QSerialPort.</div><div class="ttdef"><b>Definition:</b> serial.h:14</div></div>
<div class="ttc" id="aclass_serial_html_a01e0601c9a01111849d90f19c65d552b"><div class="ttname"><a href="class_serial.html#a01e0601c9a01111849d90f19c65d552b">Serial::portName</a></div><div class="ttdeci">QString portName</div><div class="ttdef"><b>Definition:</b> serial.h:81</div></div>
<div class="ttc" id="aclass_serial_html_a02007e17c2fca96458fabcc4803b4504"><div class="ttname"><a href="class_serial.html#a02007e17c2fca96458fabcc4803b4504">Serial::serialPort</a></div><div class="ttdeci">QPointer&lt; QSerialPort &gt; serialPort</div><div class="ttdef"><b>Definition:</b> serial.h:75</div></div>
<div class="ttc" id="aclass_serial_html_a1612a93420585830c57b1580799dc51d"><div class="ttname"><a href="class_serial.html#a1612a93420585830c57b1580799dc51d">Serial::flowControl</a></div><div class="ttdeci">QSerialPort::FlowControl flowControl</div><div class="ttdoc">Default is no flow control.</div><div class="ttdef"><b>Definition:</b> serial.h:97</div></div>
<div class="ttc" id="aclass_serial_html_a191a3d4d755f54e438ca1a40f7ebbe0b"><div class="ttname"><a href="class_serial.html#a191a3d4d755f54e438ca1a40f7ebbe0b">Serial::closeConnection</a></div><div class="ttdeci">void closeConnection()</div><div class="ttdoc">Calls closeSerialPort().</div><div class="ttdef"><b>Definition:</b> serial.cpp:96</div></div>
<div class="ttc" id="aclass_serial_html_a2a9d222cc6f3cc0f1f1c468ce11a0a3a"><div class="ttname"><a href="class_serial.html#a2a9d222cc6f3cc0f1f1c468ce11a0a3a">Serial::closeSerialPort</a></div><div class="ttdeci">void closeSerialPort()</div><div class="ttdoc">@bbrief Closes connection and deletes QSerialPort object.</div><div class="ttdef"><b>Definition:</b> serial.cpp:101</div></div>
<div class="ttc" id="aclass_serial_html_a2e542ba232be014746fd1aa8c452cb0b"><div class="ttname"><a href="class_serial.html#a2e542ba232be014746fd1aa8c452cb0b">Serial::buffer</a></div><div class="ttdeci">std::string buffer</div><div class="ttdef"><b>Definition:</b> serial.h:82</div></div>
<div class="ttc" id="aclass_serial_html_a45f0d5081e650574eeb6ba89127d4ae0"><div class="ttname"><a href="class_serial.html#a45f0d5081e650574eeb6ba89127d4ae0">Serial::terminator</a></div><div class="ttdeci">char terminator</div><div class="ttdoc">Default is LF (0x0a)</div><div class="ttdef"><b>Definition:</b> serial.h:92</div></div>
<div class="ttc" id="aclass_serial_html_a5aba620f9fe23083c857cf073f6604d9"><div class="ttname"><a href="class_serial.html#a5aba620f9fe23083c857cf073f6604d9">Serial::sendScpiCommand</a></div><div class="ttdeci">void sendScpiCommand(QString command)</div><div class="ttdoc">Sends a QString via open serial port.</div><div class="ttdef"><b>Definition:</b> serial.cpp:86</div></div>
<div class="ttc" id="aclass_serial_html_a6297b433f84aa83cc623ee042b08f684"><div class="ttname"><a href="class_serial.html#a6297b433f84aa83cc623ee042b08f684">Serial::stopBits</a></div><div class="ttdeci">QSerialPort::StopBits stopBits</div><div class="ttdoc">Default is 1 stop bit.</div><div class="ttdef"><b>Definition:</b> serial.h:102</div></div>
<div class="ttc" id="aclass_serial_html_a91bfd30bbc651b1694b989a41d0f274b"><div class="ttname"><a href="class_serial.html#a91bfd30bbc651b1694b989a41d0f274b">Serial::Serial</a></div><div class="ttdeci">Serial(QString _portName, quint32 _baudRate=9600, char _terminator=0x0a, QSerialPort::FlowControl _flowControl=QSerialPort::NoFlowControl, QSerialPort::StopBits _stopBits=QSerialPort::OneStop, QSerialPort::DataBits _dataBits=QSerialPort::Data8, QSerialPort::Parity _parity=QSerialPort::NoParity, QObject *parent=nullptr)</div><div class="ttdef"><b>Definition:</b> serial.cpp:8</div></div>
<div class="ttc" id="aclass_serial_html_a94455dd35c46ea0dbefa72fd2638705f"><div class="ttname"><a href="class_serial.html#a94455dd35c46ea0dbefa72fd2638705f">Serial::baudRate</a></div><div class="ttdeci">quint32 baudRate</div><div class="ttdoc">Default is 9600 baud.</div><div class="ttdef"><b>Definition:</b> serial.h:87</div></div>
<div class="ttc" id="aclass_serial_html_a9692214d99c0da7c444774e25d193f21"><div class="ttname"><a href="class_serial.html#a9692214d99c0da7c444774e25d193f21">Serial::makeConnection</a></div><div class="ttdeci">void makeConnection()</div><div class="ttdoc">This function gets called with a signal from client-thread Creates a new QSerialPort and connects the...</div><div class="ttdef"><b>Definition:</b> serial.cpp:25</div></div>
<div class="ttc" id="aclass_serial_html_aa53c94ec8dde60228b100a58fec0e28d"><div class="ttname"><a href="class_serial.html#aa53c94ec8dde60228b100a58fec0e28d">Serial::receivedMessage</a></div><div class="ttdeci">void receivedMessage(QString message)</div><div class="ttdoc">Signal that contains a full message from the device.</div></div>
<div class="ttc" id="aclass_serial_html_aa78ab33fab40e3aad9386313fdb9291f"><div class="ttname"><a href="class_serial.html#aa78ab33fab40e3aad9386313fdb9291f">Serial::onReadyRead</a></div><div class="ttdeci">void onReadyRead()</div><div class="ttdoc">This function gets called when the serial port emits readyRead signal Must be connected to QSerialPor...</div><div class="ttdef"><b>Definition:</b> serial.cpp:53</div></div>
<div class="ttc" id="aclass_serial_html_ab8d5926b58cec46bfc0a7ed295e3afd1"><div class="ttname"><a href="class_serial.html#ab8d5926b58cec46bfc0a7ed295e3afd1">Serial::parity</a></div><div class="ttdeci">QSerialPort::Parity parity</div><div class="ttdoc">Default is no parity.</div><div class="ttdef"><b>Definition:</b> serial.h:112</div></div>
<div class="ttc" id="aclass_serial_html_ad6cc09355c3c789a4cd45efb1de70a6f"><div class="ttname"><a href="class_serial.html#ad6cc09355c3c789a4cd45efb1de70a6f">Serial::connectionStatus</a></div><div class="ttdeci">void connectionStatus(bool connected)</div><div class="ttdoc">Sends information about connection state e.g.</div></div>
<div class="ttc" id="aclass_serial_html_ada9e5ff89fa967ecf2bbd57784228954"><div class="ttname"><a href="class_serial.html#ada9e5ff89fa967ecf2bbd57784228954">Serial::timeout</a></div><div class="ttdeci">unsigned int timeout</div><div class="ttdoc">timeout in seconnds</div><div class="ttdef"><b>Definition:</b> serial.h:117</div></div>
<div class="ttc" id="aclass_serial_html_ade8bef9aaf7456275bb7b2be23a53fd5"><div class="ttname"><a href="class_serial.html#ade8bef9aaf7456275bb7b2be23a53fd5">Serial::scanMessage</a></div><div class="ttdeci">bool scanMessage(std::string &amp;buffer)</div><div class="ttdoc">Reads the buffer and returns true if a complete message is found.</div><div class="ttdef"><b>Definition:</b> serial.cpp:68</div></div>
<div class="ttc" id="aclass_serial_html_aee15f7d9bab42cdec592960526c00b39"><div class="ttname"><a href="class_serial.html#aee15f7d9bab42cdec592960526c00b39">Serial::dataBits</a></div><div class="ttdeci">QSerialPort::DataBits dataBits</div><div class="ttdoc">Default is 8 bits.</div><div class="ttdef"><b>Definition:</b> serial.h:107</div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
